<%- include("partials/header") %>
<%- include("partials/navbar") %>

<div class="container transactions">
	<div class="landing-bg"></div>
	<!-- <br> -->
	<div id="app">
		<h1 class="glitch" data-text="Transactions">Transactions</h1>
	</div>
    <hr>
	<div class="cash-container">
		<h5>Cash in your hand: $<span class="cash-in-hand" id="playercash"><%= (player.cash/100).toFixed(2) %></span></h5>
	</div>
    <br>
	<div class="outer-search-container">
		<div class="search-container flex-row">
			<div>
				<input type="search" id="market-search" class="form-control stock-search" aria-label="Search" onkeyup="marketSearch()" placeholder="Search for stocks">
			</div>
			<div class="search-icon-container">
				<i class="fa fa-search search-icon" aria-hidden="true"></i>
			</div>
		</div>
	</div>
    <br><br>
    
    <table class="table table-borderless transactions-sheet" >
    	<thead>
    		<tr>
    			<th scope="col"> Stock name</th>
    			<th scope="col"> Status</th>
    			<th scope="col"> Qty</th>
    			<th scope="col"> Stock code</th>
    			<th scope="col"> Price</th>
    			<th scope="col"> Gain/ loss</th>
    		</tr>
    	</thead>
    	<tbody>
    	<% logs.forEach((log) => { %>
    	<tr class="stock-card" data-name="<%= log.stock.name %>">
	            <td><%= log.stock.name %></td>
	            <td>
		            <% if (log.isBought) {  %>
		                	<font class = "text-success" >BOUGHT</font>
		            <% }else{ %>
		                	<font class = "text-danger">SOLD</font>
		            <% } %>
		        </td>
	            <td><%= log.quantity %></td>
	            <td><%= log.stock.code %></td>
	            <td><strong>$</strong><%= (log.price/100).toFixed(2) %></td>
	            <td>
	            	<% if (log.change >= 0){ %>
	          	      <font class="text-success">$<%= (log.change/100).toFixed(2) %></font>
	                <%} else if (log.change < 0) { %>
	                  <font class="text-danger">$<%= (log.change/100).toFixed(2) %></font>
	                <% } %>
	            </td>
		</tr>
		<%}) %>
    	</tbody>
    </table>
</div>

<script type="text/javascript" src="/js/portfolio.js"></script>
<script type="text/javascript" src="/js/market.js"></script>

<%- include("partials/footer") %>